<%- include("header", {title: title}); %>
<div class="center"><h1>micro:bit Room controller<h1></div>
<div class="container">
<div class="row">
<div class="col">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#roomController" aria-expanded="false" aria-controls="roomController">
Create room
</button>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#savedRooms" aria-expanded="false" aria-controls="savedRooms">
Saved rooms
</button>
</p>
<div class="collapse" id="roomController">
<div class="card card-body">
<form method="post">
  <div class="form-group">
    <label for="roomname">Room name*: </label>
    <input type="text" class="form-control" id="roomname" name="roomname" required>
  </div>
  <div class="form-group">
      <label for="channel">Room channel*: </label>
      <input type="number" class="form-control" id="channel" name="channel" required>
  </div>
  <div class="form-group">
      <label for="height">Height*: </label>
      <input type="number" class="form-control" id="height" name="height" required>
  </div>
  <div class="form-group">
      <label for="width">Width*: </label>
      <input type="number" class="form-control" id="width" name="width" required>
  </div>
  <input type="hidden" id="sensordata" name="sensordata">
  <p>*Required</p>
  <div class="btn-group" role="group" aria-label="Basic example">
    <button type="button" id="room" class="btn btn-primary">Show room</button>
    <button type="submit" class="btn btn-success">Save room</button>
  </div>
</form>
<br>
</div>
</div>
<div class="collapse" id="savedRooms">
<div class="card card-body">
    <table class="table table-sm">
      <thead>
        <tr>
          <th scope="col">Room name</th>
          <th scope="col">Channel</th>
        </tr>
      </thead>
      <tbody>
    <% for (const row of roominfo) { %>
    <tr>
        <td><%= row.name %></td>
        <td><%= row.channel %></td>
        <td><a class="btn btn-success btn-sm" href="/room/<%= row.channel %>" role="button">Select room</a></td>
    </tr>
    <% }; %>
      </tbody>
    </table>
</div>
</div>
</div>
<div class="col-8">
<div id="myroomname" class="center"></div>
<div class="target"></div>
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#histogram" aria-expanded="false" aria-controls="histogram">
Sensor histogram
</button>
</p>
<div class="collapse" id="histogram">
<div class="card card-body">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Sensor id</th>
          <th scope="col">Temperature</th>
          <th scope="col">Light level</th>
          <th scope="col">Data captured</th>
          <th scope="col">Channel</th>
        </tr>
      </thead>
      <tbody>
<% for (const row of histogram) { %>
    <tr>
        <td><%= row.ID %></td>
        <td><%= row.Tempature %></td>
        <td><%= row.Light %></td>
        <td><%= row.Uploaded %></td>
        <td><%= row.Channel %></td>
    </tr>
<% }; %>
      </tbody>
    </table>
</div>
</div>
</div>
</div>
</div>
<%- include("footer"); %>
